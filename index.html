<!DOCTYPE html>
<html>
	<head>
		<title>World Sunlight</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, maximum-scale=1.0">
		<meta name="theme-color" content="#ffffff">
		<link rel="stylesheet" href="/css/main.css">
		<script src="/node_modules/jquery/dist/jquery.min.js"></script>
		<script src="/node_modules/papaparse/papaparse.js"></script>
		<script src="/js/controller.js"></script>

		<script type="text/javascript" src="/js/Detector.js"></script>
		<script type="text/javascript" src="/node_modules/three/build/three.min.js"></script>
		<!--<script type="text/javascript" src="/node_modules/jquery/src/effects/Tween.js"></script>-->
		<script type="text/javascript" src="/js/Tween.js"></script>
		<script type="text/javascript" src="/js/globe.js"></script>

	</head>
	<body>

	<h1 id="title">
		World Sunlight
	</h1>

	<div id="container"></div>

	<div id="currentInfo">
		<span id="year1990" class="year">1990</span>
		<span id="year1995" class="year">1995</span>
	</div>

	<script type="text/javascript">

		if(!Detector.webgl){
			Detector.addGetWebGLMessage();
		} else {

			var years = ['1990','1995'];
			var container = document.getElementById('container');
			var globe = new DAT.Globe(container);

			console.log(globe);
			var i, tweens = [];

			var settime = function(globe, t) {
				return function() {
					new TWEEN.Tween(globe).to({time: t/years.length},500).easing(TWEEN.Easing.Cubic.EaseOut).start();
					var y = document.getElementById('year'+years[t]);
					if (y.getAttribute('class') === 'year active') {
						return;
					}
					var yy = document.getElementsByClassName('year');
					for(i=0; i<yy.length; i++) {
						yy[i].setAttribute('class','year');
					}
					y.setAttribute('class', 'year active');
				};
			};

			for(var i = 0; i<years.length; i++) {
				var y = document.getElementById('year'+years[i]);
				y.addEventListener('mouseover', settime(globe,i), false);
			}
		}

	</script>

	</body>
</html>
